[Output]
Output=qcow-imager
CompressOutput=zstd
CompressLevel=19

# Disable sandboxing in GitHub Actions CI environment
# Why: GitHub Actions managed runners enforce kernel security policies that prevent
# network namespace configuration, even with sudo. Bubblewrap (used by mkosi) fails
# with "bwrap: loopback: Failed RTM_NEWADDR: Operation not permitted" because it
# lacks CAP_NET_ADMIN capability needed to configure network interfaces in namespaces.
# This is safe in ephemeral CI environments as runners are already isolated.
Sandboxing=false

[Distribution]
Distribution=ubuntu
Release=noble
Repositories=main,restricted,universe,multiverse
PackageManagerTrees=mkosi.apt
Architecture=arm64

[Host]
ToolsTree=default

[Content]
Packages=
     curl
     cloud-guest-utils
     gdisk
     e2fsprogs
     fdisk
     file
     iputils-ping
     lvm2
     net-tools
     nvme-cli
     parted
     qemu-utils
     linux-nvidia-64k-hwe-24.04
     curl
     debconf-utils
     dmidecode
     iputils-ping
     keyboard-configuration
     libargtable2-0
     libudev-dev
     lshw
     mstflint
     net-tools
     openssh-server
     pciutils
     smartmontools
     systemd-boot
     systemd-resolved
     systemd-timesyncd
     tpm2-tools
     util-linux
     vim-nox
     wget

RootPassword=password
