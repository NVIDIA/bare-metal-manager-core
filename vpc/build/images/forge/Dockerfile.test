FROM golang:1.18

ENV DEBIAN_FRONTEND=noninteractive

WORKDIR /
RUN echo "deb http://deb.debian.org/debian bullseye-backports main" >> /etc/apt/sources.list
RUN apt-get update && \
    apt-get install -y --no-install-recommends openvswitch-switch ovn-common ovn-host ovn-central isc-dhcp-relay && \
    rm -rf /var/cache/apt/* /var/lib/apt/lists/*
RUN curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
RUN chmod +x kubectl
