{% extends "base.html" %}

{% block title %}Host Health History {{ id }}{% endblock %}

{% block content %}
<div id="json"><a href="/admin/machine/{{ id }}/health-history.json">JSON</a></div>

<h1>Host Health History <a href="/admin/machine/{{ id }}">{{ id }}</a></h1>

<table class="detailsview">
	<thead>
		<tr>
			<th>Time</th>
			<th>Alerts</th>
			<th>Classifications</th>
			<th>Details</th>
		</tr>
	</thead>
	<tbody>
	{% for record in history %}
		<tr>
			<td>{{ record.timestamp }}</td>
			<td>
				{% if record.health.alerts.len() == 0 %}<div class="healthy">{% else %}<div class="unhealthy">{% endif %}
					{{ record.health.alerts|health_alerts_fmt(false)|safe }}
				</div>
			</td>
			<td>{{ record.health.alerts|health_alert_classifications_fmt|safe }}</td>
			<td style="overflow: auto;">
				<details>
					<summary><b>Expand</b></summary>
					<pre style="max-width: 50vw;"><code class="prettyjson">{{ record.health|json|safe }}</code></pre>
				</details>
			</td>
		</tr>
	{% endfor %}
	</tbody>
</table>

{% endblock %}
