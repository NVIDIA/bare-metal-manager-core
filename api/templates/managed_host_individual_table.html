<table class="sortable">
	<thead>
		<tr>
			<th>Host ID</th>
			<th>DPU ID</th>
			{% if active_maintenance_filter == "maintenance" %}
				<th>Maintenance Ref</th>
				<th>Maintenance Start</th>
			{% endif %}
			<th>State</th>
			<th>Health Alerts</th>
			<th>Health Overrides #</th>
			<th>IPs</th>
			<th>MACs</th>
			{% if active_maintenance_filter != "maintenance" %}
				<th>GPU #</th>
				<th>IB IFs #</th>
				<th>Host Memory</th>
			{% endif %}
		<tr/>
	</thead>
	<tbody>
	{% for host in hosts %}
		<tr>
			<td>{{ host.machine_id|managed_host_id_link|safe }}</td>
			<td>{{ host.dpu_properties(DpuProperty::MachineId)|safe }}</td>
			{% if active_maintenance_filter == "maintenance" %}
				<td>{% if host.is_link_ref %}<a href="{{ host.maintenance_reference }}">{{ host.maintenance_reference }}</a>{% else %}{{ host.maintenance_reference }}{% endif %}</td>
				<td>{{ host.maintenance_start_time }}</td>
			{% endif %}
			<td title="{{ host.state_reason }}">{{ host.state }}</td>
			<td>
				{% if host.health_probe_alerts.len() == 0 %}<div class="healthy">{% else %}<div class="unhealthy">{% endif %}
					<a href="/admin/machine/health/{{ host.machine_id }}">
						{{ host.health_probe_alerts|health_alerts_fmt(false)|safe }}
					</a>
				</div>
			</td>
			<td><a href="/admin/machine/health/{{ host.machine_id }}">{{ host.health_overrides.len() }}</a></td>
			<td style="padding: 0;">
				<table style="width: 100%;">
					<tr><th>Host BMC</th><td><a href="/admin/explored-endpoint/{{ host.host_bmc_ip }}">{{ host.host_bmc_ip }}</a></td></tr>
					<tr><th>DPU BMC</th><td>{{ host.dpu_properties(DpuProperty::BmcIp)|safe }}</td></tr>
					<tr><th>Host Admin</th><td>{{ host.host_admin_ip }}</td></tr>
					<tr><th>DPU OOB</th><td>{{ host.dpu_properties(DpuProperty::OobIp)|safe }}</td></tr>
				</table>
			</td>
			<td style="padding: 0;">
				<table style="width: 100%;">
					<tr><th>Host BMC</th><td>{{ host.host_bmc_mac }}</td></tr>
					<tr><th>DPU BMC</th><td>{{ host.dpu_properties(DpuProperty::BmcMac)|safe  }}</td></tr>
					<tr><th>Host PF</th><td>{{ host.host_admin_mac }}</td></tr>
					<tr><th>DPU OOB</th><td>{{ host.dpu_properties(DpuProperty::OobMac)|safe  }}</td></tr>
				</table>
			</td>
			{% if active_maintenance_filter != "maintenance" %}
				<td>{{ host.num_gpus }}</td>
				<td>{{ host.num_ib_ifs }}</td>
				<td>{{ host.host_memory }}</td>
			{% endif %}
		</tr>
	{% endfor %}
		<tfoot>
			<tr>
				<th>{{ hosts.len() }} item{% if hosts.len() != 1 %}s{% endif %}</th>
				<th></th>
				{% if active_maintenance_filter == "maintenance" %}
					<th></th>
					<th></th>
				{% endif %}
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				<th></th>
				{% if active_maintenance_filter != "maintenance" %}
					<th></th>
					<th></th>
					<th></th>
				{% endif %}
			</tr>
		</tfoot>
	</tbody>
</table>
