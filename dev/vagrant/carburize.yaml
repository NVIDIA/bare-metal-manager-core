---
ngc:
  network: 192.168.0.0 
  netmask: 24 
  provider: libvirt
  hosts:
    - name: "relay001"
      image: "generic/ubuntu:2110"
      ipv4: 192.168.0.1
      userdata:
        packages:
          - dnsmasq
          - nftables
        write_files:
          - path: "/etc/dnsmasq.conf"
            permissions: "0644"
            content: |
              port = 0
              interface=enp0s9
              dhcp-relay=192.168.0.1,172.17.0.10
              no-negcache
            owner: "root:root"
          - path: "/etc/sysctl.d/90-forwarding"
            permissions: "0644"
            content: |
              net.ipv4.ip_forward=1
              net.ipv6.conf.all.forwarding=1
            owner: root:root
        runcmd:
          - [ systemctl, daemon-reload]
          - [ systemctl, restart, dnsmasq ]
          - [ systemctl, restart, procps ]
    - name: "client001"
      image:  "generic/ubuntu:2110"
